{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Adri%C3%A0/nopain/app/api/checkout/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport Stripe from \"stripe\"\r\n\r\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {\r\n  apiVersion: \"2025-02-11\",\r\n})\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json()\r\n    const { clinicId, userName, date, time } = body\r\n\r\n    // Crear sesi√≥n de pago\r\n    const session = await stripe.checkout.sessions.create({\r\n      payment_method_types: [\"card\"],\r\n      mode: \"payment\",\r\n      line_items: [\r\n        {\r\n          price_data: {\r\n            currency: \"eur\",\r\n            product_data: {\r\n              name: \"Sesi√≥n de fisioterapia\",\r\n              description: `${date} ‚Äî ${time}`,\r\n            },\r\n            unit_amount: 4000, // üí∂ 40.00‚Ç¨\r\n          },\r\n          quantity: 1,\r\n        },\r\n      ],\r\n      success_url: `${process.env.NEXT_PUBLIC_SITE_URL}/success?session_id={CHECKOUT_SESSION_ID}`,\r\n      cancel_url: `${process.env.NEXT_PUBLIC_SITE_URL}/clinics/${clinicId}`,\r\n      metadata: {\r\n        clinic_id: clinicId,\r\n        user_name: userName,\r\n        date,\r\n        time,\r\n      },\r\n    })\r\n\r\n    return NextResponse.json({ url: session.url })\r\n  } catch (err: any) {\r\n    console.error(\"‚ùå Stripe error:\", err)\r\n    return NextResponse.json(\r\n      { error: err.message },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,SAAS,IAAI,mKAAM,CAAC,QAAQ,GAAG,CAAC,iBAAiB,EAAG;IACxD,YAAY;AACd;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG;QAE3C,uBAAuB;QACvB,MAAM,UAAU,MAAM,OAAO,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC;YACpD,sBAAsB;gBAAC;aAAO;YAC9B,MAAM;YACN,YAAY;gBACV;oBACE,YAAY;wBACV,UAAU;wBACV,cAAc;4BACZ,MAAM;4BACN,aAAa,GAAG,KAAK,GAAG,EAAE,MAAM;wBAClC;wBACA,aAAa;oBACf;oBACA,UAAU;gBACZ;aACD;YACD,aAAa,6DAAoC,yCAAyC,CAAC;YAC3F,YAAY,6DAAoC,SAAS,EAAE,UAAU;YACrE,UAAU;gBACR,WAAW;gBACX,WAAW;gBACX;gBACA;YACF;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,KAAK,QAAQ,GAAG;QAAC;IAC9C,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,mBAAmB;QACjC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,IAAI,OAAO;QAAC,GACrB;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}